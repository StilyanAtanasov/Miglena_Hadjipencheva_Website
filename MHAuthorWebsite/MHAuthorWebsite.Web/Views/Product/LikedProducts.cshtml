@using MHAuthorWebsite.Web.ViewModels.Product
@model ICollection<LikedProductViewModel>

@{
	ViewBag.Title = "Любими продукти";
}

@section Styles {
	<link href="https://cdn.jsdelivr.net/npm/sweetalert2@11.22.3/dist/sweetalert2.min.css" rel="stylesheet">
	<link rel="stylesheet" href="~/css/liked-products.css" asp-append-version="true" />
	<link rel="stylesheet" href="~/css/notification.css" asp-append-version="true" />
}

<div class="page-wrapper flex-column">
	<h1 class="title">Любими продукти</h1>

	<section class="liked-products flex-column">
		@if (Model.Any())
		{
			@foreach (LikedProductViewModel product in Model)
			{
				<div class="product-card flex-row clickable" data-details-url="@Url.Action("Details", "Product", new { productId = product.Id })">
					<div class="product-info flex-row">
						<div class="product-image-container flex-row">
							<img class="product-image" src="@product.ThumbnailUrl" alt="@(product.ThumbnailAlt ?? product.Name)" />
						</div>
						<div class="product-details-container">
							<h2 class="product-name"><a data-trigger="load-unlimited" asp-controller="Product" asp-action="Details" asp-route-id="@product.Id" class="link">@product.Name</a></h2>
							<p class="text-faded">@product.CategoryName</p>
							<p class="price">@product.Price.ToString("F2") лв.</p>
							<span class="price-text @(product.IsInStock ? "available" : "unavailable")">@(product.IsInStock ? "В наличност" : "Изчерпана наличност")</span>
						</div>
					</div>
					<form method="post" asp-controller="Cart" asp-action="Add" class="order-form">
						<input type="hidden" name="productId" value="@product.Id" />
						<input type="hidden" name="quantity" value="1" />
						<button type="submit" class="btn order flex-row" @(product.IsInStock ? "" : "disabled")>
							<i class="fa-solid fa-cart-shopping-fast"></i> Поръчай
						</button>
					</form>
					<button data-role="remove-item" data-item-id="@product.Id" class="btn remove btn-none"><i class="fa-solid fa-trash-can"></i></button>
				</div>
				<hr id="line-@product.Id"/>
			}
		}
		else
		{
			<p class="zero-liked flex-column"><i class="fa-solid fa-heart-circle-xmark"></i> Все още не сте харесали продукт!</p>
		}
	</section>
</div>

@section Scripts {
	<script type="module" src="~/js/notification.js" asp-append-version="true"></script>
	<script type="module" src="~/js/liked-products.js" asp-append-version="true"></script>
	<script src="~/js/click.js" asp-append-version="true"></script>
}